# WordPressサーバー移転・ドメイン移管サービス 見積りフォーム 技術仕様書 概要

**バージョン:** 1.1.0
**作成日:** 2025年3月10日
**最終更新日:** 2025年3月11日

## 重要なルール
1. **コード改変に関する規則**: 指示があるまで、一度作成したコードを勝手に改変しないこと。コードの修正や変更が必要な場合は、必ず明示的な承認を得てから行うこと。
2. **バージョン管理**: 変更を行う場合は、必ず技術仕様書を更新し、変更内容を記録すること。
3. **テスト**: コードの変更後は必ず複数の環境（デスクトップ、タブレット、モバイル）でテストを行うこと。

## システム概要
### 目的
本システムは、WordPressサーバー移転・ドメイン移管・CMS移行サービスの見積りをWebフォームで簡単に作成し、計算結果をExcelファイルとして出力することを目的としています。ユーザーが必要なオプションを選択するだけで、即時に合計金額が計算され、専門的な知識がなくても見積りを作成できる仕組みを提供します。

## 主な機能
1. 見積りフォーム表示機能
2. リアルタイム計算機能
3. Excel/CSV出力機能
4. レスポンシブデザイン対応

## ファイル構成
```
/wordpress-estimate/
├── index.html             # メインHTMLファイル
├── .htaccess              # サーバー設定ファイル
├── README.md              # 説明ドキュメント
├── 技術仕様書.md           # 本ドキュメント
├── css/
│   └── style.css          # スタイルシート
├── js/
│   └── script.js          # JavaScript処理
└── php/
    └── export-excel.php   # Excel出力用PHPスクリプト
```

## システム構成
- **フロントエンド:** HTML/CSS/JavaScript
- **バックエンド:** PHP (オプション)
- **データ出力:** Excel/CSV形式
- **サポートブラウザ:** Chrome, Firefox, Safari, Edge 最新版
- **レスポンシブ対応:** PC/タブレット/スマートフォン対応

## デザイン仕様
### 全体デザイン
- **配色:**
  - メインカラー: #0056b3（青）
  - アクセントカラー: #28a745（緑）
  - 警告カラー: #e74c3c（赤）
  - 背景色: #f5f5f5（薄いグレー）
  - フォーム背景: #ffffff（白）
- **フォント:** 'Helvetica Neue', Arial, sans-serif
- **ボックスシャドウ:** 0 2px 10px rgba(0, 0, 0, 0.1)
- **ボーダーラジウス:** 4px（標準）、5px（セクション）

### フォーム要素
- **入力フィールド:**
  - パディング: 10px
  - ボーダー: 1px solid #ddd
  - フォーカス時: ボーダー色変更、わずかな発光効果
- **ボタン:**
  - プライマリー: #0056b3（青）
  - セカンダリー: #6c757d（グレー）
  - アクション: #28a745（緑）
  - ホバー時: 色の濃化、わずかな拡大効果

### サービス説明セクション
- **背景色:** #eef7ff（淡い青）
- **ボーダー:** 左側に5px solid #0056b3（青）
- **影効果:** box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05)
- **タイトル:**
  - 色: #0056b3（青）
  - フォントサイズ: 17px
  - ボーダー下: 1px solid #d1e6ff
- **役割部分:**
  - 背景: #f5f9ff
  - パディング: 8px
  - 見出し: 色 #0056b3、フォントサイズ 15px
- **メリット部分:**
  - 背景: #f0f8f0
  - ボーダー左: 3px solid #28a745（緑）
  - 見出し: 色 #28a745、フォントサイズ 15px
  - リスト項目: 背景 #f8fffa、チェックマーク ✓、ホバー時 背景色 #f0fff5
- **注意事項:**
  - 背景: #fff5f5
  - ボーダー左: 3px solid #e74c3c（赤）
  - 色: #e74c3c

### オプション項目セクション
- **背景色:** #f8fbff
- **ボーダー:** 1px solid #d1e6ff
- **ホバー時:** 背景色 #f0f7ff、box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05)
- **価格表示:**
  - 背景: #e6f0ff
  - ボーダーラジウス: 15px
  - 色: #0056b3
- **オプション詳細:**
  - ボーダー上: 1px dotted #b8d8ff
  - タイトル: 色 #0056b3、フォントサイズ 16px
  - 説明: 背景 #f5f9ff、パディング 6px

### レスポンシブデザイン
- **デスクトップ:** 1200px以上
  - 標準のレイアウト
  - 2カラム表示のフォーム要素
- **タブレット:** 769px〜1024px
  - フォームグループの最小幅: 200px
  - 説明部分のパディング調整
- **モバイル:** 768px以下
  - 1カラム表示に変更
  - フォーム要素の全幅表示
  - 入力フィールドの高さ増加（44px）
  - ボタンの全幅表示
- **小型モバイル:** 480px以下
  - パディングの縮小
  - オプション項目のレイアウト調整
  - フォントサイズの縮小

## 実装機能詳細
### フォーム入力機能
- **基本情報入力:**
  - お客様情報（名前、会社名、連絡先等）
  - WordPress サイト基本情報
  - サーバーログイン情報
  - ドメイン管理情報
  - FTP情報
  - メール設定情報
- **オプション選択:**
  - ワードプレス移転関連オプション
  - ドメイン関連オプション
  - メール設定オプション
  - その他オプションサービス

### サービス説明表示
- **PHP バージョンアップのメリット:**
  1. セキュリティの強化
  2. パフォーマンスの向上
  3. 新機能の利用
  4. 互換性の維持
  5. サポート期間の延長
- **WordPress バージョンアップのメリット:**
  1. セキュリティ強化
  2. 新機能の追加
  3. パフォーマンス改善
  4. プラグイン・テーマの互換性
- **DMARC設定など各種メールセキュリティオプション:**
  - 役割と仕組みの説明
  - メリットの箇条書き

### リアルタイム計算機能
- **基本料金:** 12,000円
- **サイト容量による追加料金:**
  - 2GB未満: 0円
  - 2GB以上10GB未満: 8,000円
  - 10GB以上20GB未満: 13,000円
  - 20GB以上30GB未満: 23,000円
  - 30GB以上: 30,000円
- **オプションサービス料金:** 各項目ごとに設定
- **SNS拡散割引:** 5%割引
- **プラットフォーム手数料:** ココナラ/ランサーズは20%上乗せ
- **消費税:** 10%自動計算

### Excel/CSV出力機能
- **SheetJS (xlsx.js)** を使用したクライアントサイド生成
  - JavaScript側で全データ処理
  - ブラウザ内で直接Excelファイル生成
  - サーバーに負荷をかけない処理
- **PHPSpreadsheet** によるサーバーサイド生成（オプション）
  - 複雑なフォーマットが必要な場合に使用
  - テンプレート機能でデザイン性の高い出力
- **出力内容:**
  - 見積りタイトルと作成日
  - 基本情報
  - サーバー情報
  - 選択したオプション一覧
  - 合計金額と算出根拠

## パフォーマンス最適化
### ブラウザキャッシュ
`.htaccess` ファイルでのExpires設定：
```apache
<IfModule mod_expires.c>
    ExpiresActive On
    ExpiresByType text/css "access plus 1 month"
    ExpiresByType application/javascript "access plus 1 month"
    ExpiresByType image/png "access plus 1 year"
    # その他のファイルタイプ
</IfModule>
```

### GZIP圧縮
`.htaccess` ファイルでのDeflate設定：
```apache
<IfModule mod_deflate.c>
    AddOutputFilterByType DEFLATE text/html
    AddOutputFilterByType DEFLATE text/css
    AddOutputFilterByType DEFLATE application/javascript
    # その他のファイルタイプ
</IfModule>
```

### コード最適化
- 外部JavaScriptの遅延読み込み
- CSS最適化
- イベント処理の効率化

## セキュリティ対策
### XSS対策
- HTMLエンティティのエスケープ処理
- Content Security Policyの設定
- X-XSS-Protectionヘッダーの設定

### CSRF対策
- トークン検証（PHP機能使用時）
- フォーム送信時の検証処理

### 入力検証
- クライアントサイドでの入力検証
  - 必須項目チェック
  - 形式チェック（メール、電話番号等）
  - 値範囲チェック
- サーバーサイドでの検証（PHP機能使用時）
  - データ型チェック
  - サニタイズ処理
  - ホワイトリスト検証

## 改修履歴
### 2025年3月11日の改修

#### PHP・WordPressバージョンアップのメリット説明の統一
- PHPとWordPressのバージョンアップメリットの説明を追加
- 説明部分のデザインをSPF説明スタイルに統一
- 説明部分にレスポンシブデザイン対応を追加

#### オプション説明部分の視覚的強調
- 説明ボックスの背景色変更（#eef7ff）
- 左側ボーダーの追加（5px solid #0056b3）
- 影効果の追加（box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05)）
- タイトル部分の強調（青色、下部に境界線）
- 役割説明の視覚的分離（背景色の変更）
- メリット部分の緑色ベースデザイン
- チェックマーク（✓）によるリスト項目の強調
- 淡い緑色の背景とホバーエフェクトをリスト項目に追加
- 警告・注意の赤色アクセント

## テスト項目
### 機能テスト
- [ ] 各入力フィールドが正常に動作するか
- [ ] オプション選択時に金額が正しく計算されるか
- [ ] SNS拡散割引が正しく適用されるか
- [ ] プラットフォーム手数料が正しく計算されるか
- [ ] Excel/CSV出力が正常に行われるか

### 表示テスト
- [ ] デスクトップでの表示確認（Chrome, Firefox, Safari, Edge）
- [ ] タブレットでの表示確認（iPad, Android Tablet）
- [ ] スマートフォンでの表示確認（iPhone, Android）
- [ ] 小型デバイスでの表示確認（iPhone SE等）

### パフォーマンステスト
- [ ] ページ読み込み速度
- [ ] JavaScript実行時間
- [ ] メモリ使用状況

## 今後の開発計画
### 短期計画（1か月以内）
- フォームのユーザビリティ向上
- 入力項目の追加・最適化
- レポート機能の強化

### 中期計画（3か月以内）
- ユーザー認証システムの実装
- 見積り履歴機能の追加
- PDF出力機能の実装

### 長期計画（6か月以内）
- 多言語対応
- スマートフォンアプリ版の開発検討
- APIによる外部システム連携

## 参考資料
- [Bootstrap 5 ドキュメント](https://getbootstrap.com/docs/5.3/)
- [SheetJS (xlsx.js) ドキュメント](https://docs.sheetjs.com/)
- [PHPSpreadsheet ドキュメント](https://phpspreadsheet.readthedocs.io/)
- [Xサーバー マニュアル](https://www.xserver.ne.jp/manual/)

---

**作成者:** WordPressサーバー移転サービス
**問い合わせ先:** example@example.com
**最終更新日:** 2025年3月11日